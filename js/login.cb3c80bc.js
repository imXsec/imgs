(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"05da":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login_box"},[r("div",{staticClass:"limit"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.logoSrc,alt:""}})]),r("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1===e.allow_login_phone?r("el-tab-pane",{attrs:{label:e.$t("login.loginPhone"),name:"phone"}},[r("div",{staticClass:"login_form"},[r("el-form",{ref:"loginPhoneFormRef",attrs:{model:e.loginPhoneForm,rules:e.loginPhoneFormRules}},[r("el-form-item",{attrs:{prop:"phone",error:e.phoneError}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("login.enterPhone"),clearable:""},model:{value:e.loginPhoneForm.phone,callback:function(t){e.$set(e.loginPhoneForm,"phone",t)},expression:"loginPhoneForm.phone"}},[r("el-select",{attrs:{slot:"prepend",filterable:""},slot:"prepend",model:{value:e.loginPhoneForm.phone_code,callback:function(t){e.$set(e.loginPhoneForm,"phone_code",t)},expression:"loginPhoneForm.phone_code"}},e._l(e.phoneCodeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.phone_code,value:e.phone_code}})})),1)],1)],1),"pwd"===e.loginBy?r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByPhone(t)}},model:{value:e.loginPhoneForm.password,callback:function(t){e.$set(e.loginPhoneForm,"password",t)},expression:"loginPhoneForm.password"}})],1):r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByPhone(t)}},model:{value:e.loginPhoneForm.code,callback:function(t){e.$set(e.loginPhoneForm,"code",t)},expression:"loginPhoneForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled?"info":"primary",disabled:e.codeBtnDisabled},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue))])],1),r("div",{staticClass:"login_btns"},["phone"===e.activeName?r("span",{on:{click:e.changeLoginBy}},["pwd"===e.loginBy?r("router-link",{attrs:{to:""}},[e._v(e._s(e.$t("login.loginCode")))]):r("router-link",{attrs:{to:""}},[e._v(e._s(e.$t("login.loginPwd")))])],1):e._e(),r("span",{staticClass:"forgetPwd"},[r("router-link",{attrs:{to:"/reset"}},[e._v(e._s(e.$t("login.forgetPwd")))])],1)]),r("el-button",{staticClass:"loginBtn",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.loginByPhone}},[e._v(" "+e._s(e.$t("login.login")))])],1)],1)]):e._e(),1===e.allow_login_email?r("el-tab-pane",{attrs:{label:e.$t("login.loginEmail"),name:"email"}},[r("div",{staticClass:"login_form"},[r("el-form",{ref:"loginEmialFormRef",attrs:{model:e.loginEmialForm,rules:e.loginEmialFormRules}},[r("el-form-item",{attrs:{prop:"email",error:e.emailError}},[r("el-input",{attrs:{placeholder:e.$t("login.enterEmail"),clearable:""},model:{value:e.loginEmialForm.email,callback:function(t){e.$set(e.loginEmialForm,"email",t)},expression:"loginEmialForm.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByEmail(t)}},model:{value:e.loginEmialForm.password,callback:function(t){e.$set(e.loginEmialForm,"password",t)},expression:"loginEmialForm.password"}})],1),r("div",{staticClass:"login_btns"},[r("span",{staticClass:"forgetPwd"},[r("router-link",{attrs:{to:"/reset"}},[e._v(e._s(e.$t("login.forgetPwd")))])],1)]),r("el-button",{staticClass:"loginBtn",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.loginByEmail}},[e._v(" "+e._s(e.$t("login.login")))])],1)],1)]):e._e()],1),1===e.allow_login_phone||1===e.allow_login_email?r("div",{staticClass:"login_login"},[e._v(" "+e._s(e.$t("login.hasNoAccount"))+" "),r("router-link",{attrs:{to:"/register"}},[e._v(e._s(e.$t("login.register")))])],1):0===e.allow_login_phone&&0===e.allow_login_email?r("div",{staticClass:"tac"},[e._v(e._s(e.$t("login.nothing")))]):e._e()],1)])])},o=[],a=(r("45fc"),r("b0c0"),r("498a"),r("96cf"),r("1da1")),i=r("c7a1"),s=r("7555"),l=r("2ef0"),c={metaInfo:function(){return{title:this.$t("login.login"),titleTemplate:"%s - "+this.companyTitle,htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){var e=this,t=function(t,r,n){""===r?n(new Error(e.$t("login.enterPhone"))):e.checkPhone(r)?n():(e.loginPhoneForm.phone=e.loginPhoneForm.phone.trim(),n(new Error(e.$t("login.validatePhone"))))},r=function(t,r,n){""===r?n(new Error(e.$t("login.enterEmail"))):e.checkEmail(r)?n():n(new Error(e.$t("login.validateEmail")))},n=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwd"))):n()},o=function(t,r,n){""===r?n(new Error(e.$t("login.enterCode"))):n()};return{companyTitle:"",logoSrc:"",allow_login_phone:void 0,allow_login_email:void 0,allow_wechat:void 0,activeName:"phone",loginLoading:!1,loginBy:"pwd",phoneCodeOptions:[],loginPhoneForm:{phone_code:"+86",phone:"",code:"",password:""},phoneError:"",loginPhoneFormRules:{phone:[{validator:t,trigger:"blur"}],password:[{validator:n,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],code:[{validator:o,trigger:"blur"}]},loginEmialForm:{email:"",password:""},loginEmialFormRules:{email:[{validator:r,trigger:"blur"}],password:[{validator:n,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}]},emailError:"",changeBtnValue:this.$t("login.getCode"),codeBtnDisabled:!1,timer:null,wechatUrl:"",prePath:""}},methods:{getConfig:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])();case 2:r=t.sent,n=r.data,200!==n.status?e.$message.error(n.msg):(e.companyTitle=n.data.company_name,e.logoSrc=n.data.logo_url,sessionStorage.setItem("changeLang",n.data.allow_user_language),sessionStorage.setItem("logoSrc",n.data.logo_url_home),sessionStorage.setItem("certifi_open",n.data.certifi_open),e.$store.dispatch("addCertifiOpen",n.data.certifi_open),o=window.langStr.some((function(e){return e.flag===localStorage.getItem("locale")})),null!==localStorage.getItem("locale")&&o||(e.appendScript(n.data.language+".js"),localStorage.setItem("locale",n.data.language)));case 5:case"end":return t.stop()}}),t)})))()},appendScript:function(e){var t=document.createElement("script");t.type="text/javascript",t.src="./lang/"+e+"?v1.0.1";var r=document.getElementsByTagName("head")[0];r.appendChild(t)},getSomeMsg:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:if(e.allow_login_phone=n.data.allow_login_phone,e.allow_login_email=n.data.allow_login_email,e.allow_wechat=n.data.allow_wechat,1!==e.allow_login_phone){t.next=12;break}return e.activeName="phone",t.abrupt("return",!1);case 12:if(1!==e.allow_login_email){t.next=15;break}return e.activeName="email",t.abrupt("return",!1);case 15:if(1!==e.allow_wechat){t.next=18;break}return e.activeName="weChat",t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.activeName=e.name,"phone"===e.name?(this.wechatUrl="",this.$refs.loginEmialFormRef.resetFields()):"email"===e.name?(this.wechatUrl="",this.$refs.loginPhoneFormRef.resetFields()):"weChat"===e.name&&(this.loginWeChat(),this.$refs.loginEmialFormRef.resetFields(),this.$refs.loginPhoneFormRef.resetFields())},changeLoginBy:function(){"code"===this.loginBy?(this.loginBy="pwd",this.loginPhoneForm.password="",this.$refs.loginPhoneFormRef.resetFields()):"pwd"===this.loginBy&&(this.loginBy="code",this.loginPhoneForm.code="",this.$refs.loginPhoneFormRef.resetFields())},checkPhone:function(e){var t=/^\d{5,13}$/;return!!t.test(e)},checkEmail:function(e){var t=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;return!!t.test(e)},getLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.phoneCodeOptions=n.data;case 7:case"end":return t.stop()}}),t)})))()},getCheckedCode:l.throttle((function(){var e=this;"phone"===this.activeName&&"code"===this.loginBy&&this.$refs.loginPhoneFormRef.validateField("phone",(function(t){if(t)return!1;e.getCode(e.loginPhoneForm.phone_code,e.loginPhoneForm.phone)}))}),3e3),getCode:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.phoneError="",r.countDown(),n.next=4,Object(s["c"])(e,t);case 4:if(o=n.sent,a=o.data,200===a.status){n.next=14;break}return r.phoneError=a.msg,clearInterval(r.timer),r.codeBtnDisabled=!1,r.changeBtnValue=r.$t("login.getCode"),n.abrupt("return",!1);case 14:r.$message.success(a.msg);case 15:case"end":return n.stop()}}),n)})))()},loginByPhone:l.throttle((function(){var e=this;"pwd"===this.loginBy?this.$refs.loginPhoneFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=18;break}return localStorage.getItem("locale")||e.getConfig(),e.loginLoading=!0,t.next=5,Object(s["j"])(e.loginPhoneForm.phone_code,e.loginPhoneForm.phone,e.loginPhoneForm.password);case 5:if(n=t.sent,o=n.data,200===o.status){t.next=11;break}return e.$message({message:o.msg,type:"error",center:!0}),e.loginLoading=!1,t.abrupt("return",!1);case 11:e.$message({message:o.msg,type:"success",center:!0}),e.loginLoading=!1,window.localStorage.setItem("OrfLcI2IqQItv0vS",o.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=19;break;case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"code"===this.loginBy&&this.$refs.loginPhoneFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}return e.loginLoading=!0,t.next=4,Object(s["i"])(e.loginPhoneForm.phone_code,e.loginPhoneForm.phone,e.loginPhoneForm.code);case 4:if(n=t.sent,o=n.data,200===o.status){t.next=10;break}return e.$message({message:o.msg,type:"error",center:!0}),e.loginLoading=!1,t.abrupt("return",!1);case 10:e.$message({message:o.msg,type:"success",center:!0}),e.loginLoading=!1,clearInterval(e.timer),e.codeBtnDisabled=!1,e.changeBtnValue=e.$t("login.getCode"),window.localStorage.setItem("OrfLcI2IqQItv0vS",o.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),loginByEmail:l.throttle((function(){var e=this;this.$refs.loginEmialFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=19;break}return localStorage.getItem("locale")||e.getConfig(),e.loginLoading=!0,t.next=5,Object(s["h"])(e.loginEmialForm.email,e.loginEmialForm.password);case 5:if(n=t.sent,o=n.data,200===o.status){t.next=12;break}return e.emailError=o.msg,e.$message({message:o.msg,type:"error",center:!0}),e.loginLoading=!1,t.abrupt("return",!1);case 12:e.$message({message:o.msg,type:"success",center:!0}),e.loginLoading=!1,window.localStorage.setItem("OrfLcI2IqQItv0vS",o.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=20;break;case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),countDown:function(){var e=this,t=60;this.changeBtnValue=t+this.$t("login.timeCount"),this.timer=setInterval((function(){0===t?(clearInterval(e.timer),e.codeBtnDisabled=!1,e.changeBtnValue=e.$t("login.getCode")):(e.codeBtnDisabled=!0,e.changeBtnValue=t+e.$t("login.timeCount"),t--)}),1e3)},loginWeChat:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["k"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.wechatUrl=n.wxlogin_url;case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.getSomeMsg(),this.getLogin(),this.getConfig()},beforeRouteEnter:function(e,t,r){r((function(e){e.prePath=t.path,sessionStorage.setItem("prePath",t.path)}))}},u=c,m=(r("809a"),r("2877")),g=Object(m["a"])(u,n,o,!1,null,"4a154dca",null);t["default"]=g.exports},"07c2":function(e,t,r){},"1d21":function(e,t,r){"use strict";var n=r("07c2"),o=r.n(n);o.a},"498a":function(e,t,r){"use strict";var n=r("23e7"),o=r("58a8").trim,a=r("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),o=r("5899"),a="["+o+"]",i=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,r){var n=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var a,i;return o&&"function"==typeof(a=t.constructor)&&a!==r&&n(i=a.prototype)&&i!==r.prototype&&o(e,i),e}},"72d3":function(e,t,r){"use strict";var n=r("9785"),o=r.n(n);o.a},7555:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"m",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"j",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"i",(function(){return g})),r.d(t,"h",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"o",(function(){return h})),r.d(t,"f",(function(){return f})),r.d(t,"n",(function(){return w})),r.d(t,"k",(function(){return _}));var n=r("a27e");function o(){return Object(n["a"])({url:"/mobile_login_page",noLogin:!0})}function a(){return Object(n["a"])({url:"/login_register_index",noLogin:!0})}function i(e,t){return Object(n["a"])({url:"/register_phone_send",method:"post",data:{phone_code:e,phone:t},noLogin:!0})}function s(e){return Object(n["a"])({url:"/register_phone",method:"post",data:e,noLogin:!0})}function l(e){return Object(n["a"])({url:"/register_email_send",method:"post",data:{email:e},noLogin:!0})}function c(e){return Object(n["a"])({url:"/register_email",method:"post",data:e,noLogin:!0})}function u(e,t,r){return Object(n["a"])({url:"/login_pass_phone",method:"post",data:{phone_code:e,phone:t,password:r},noLogin:!0})}function m(e,t){return Object(n["a"])({url:"/login_send",method:"post",data:{phone_code:e,phone:t},noLogin:!0})}function g(e,t,r){return Object(n["a"])({url:"/mobile_login",method:"post",data:{phone_code:e,phone:t,code:r},noLogin:!0})}function d(e,t){return Object(n["a"])({url:"/login_pass_email",method:"post",data:{email:e,password:t},noLogin:!0})}function p(e,t){return Object(n["a"])({url:"/reset_phone_send",method:"post",data:{phone_code:e,phone:t},noLogin:!0})}function h(e){return Object(n["a"])({url:"/reset_phone",method:"post",data:e,noLogin:!0})}function f(e){return Object(n["a"])({url:"/reset_email_send",method:"post",data:{email:e},noLogin:!0})}function w(e){return Object(n["a"])({url:"/reset_email",method:"post",data:e,noLogin:!0})}function _(){return Object(n["a"])({url:"/wechat_login",noLogin:!0})}},"76c1":function(e,t,r){},"809a":function(e,t,r){"use strict";var n=r("76c1"),o=r.n(n);o.a},9785:function(e,t,r){},a71a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("div",{staticClass:"register_box"},[r("div",{staticClass:"limit"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.$baseUrl+e.logoSrc,alt:""}})]),r("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1===e.allow_register_phone?r("el-tab-pane",{attrs:{label:e.$t("login.registerPhone"),name:"phone"}},[r("div",{staticClass:"register_form"},[r("el-form",{ref:"registerPhoneFormRef",attrs:{model:e.registerPhoneForm,rules:e.registerPhoneFormRules}},[r("el-form-item",{attrs:{prop:"phone",error:e.phoneErrorMsg}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("login.enterPhone"),clearable:""},model:{value:e.registerPhoneForm.phone,callback:function(t){e.$set(e.registerPhoneForm,"phone",t)},expression:"registerPhoneForm.phone"}},[r("el-select",{attrs:{slot:"prepend",filterable:""},slot:"prepend",model:{value:e.registerPhoneForm.phone_code,callback:function(t){e.$set(e.registerPhoneForm,"phone_code",t)},expression:"registerPhoneForm.phone_code"}},e._l(e.phoneCodeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.phone_code,value:e.phone_code}})})),1)],1)],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.registerPhoneForm.code,callback:function(t){e.$set(e.registerPhoneForm,"code",t)},expression:"registerPhoneForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled1?"info":"primary",disabled:e.codeBtnDisabled1},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue1))])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":"",autocomplete:"off"},model:{value:e.registerPhoneForm.password,callback:function(t){e.$set(e.registerPhoneForm,"password",t)},expression:"registerPhoneForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":"",autocomplete:"off"},model:{value:e.registerPhoneForm.checkPassword,callback:function(t){e.$set(e.registerPhoneForm,"checkPassword",t)},expression:"registerPhoneForm.checkPassword"}})],1),e.setSaler?r("el-form-item",[r("div",{staticClass:"salelimit"},[r("div",{staticClass:"salelimit_title"},[e._v("销售代表")]),r("div",{staticClass:"salelimit_select"},[r("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择销售",clearable:""},model:{value:e.registerPhoneForm.sale_id,callback:function(t){e.$set(e.registerPhoneForm,"sale_id",t)},expression:"registerPhoneForm.sale_id"}},[r("template",{slot:"prepend"},[e._v("Http://")]),e._l(e.sale_idOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.user_nickname,value:e.id}})}))],2)],1)])]):e._e(),e.clients_profoptional.includes("qq")?r("el-form-item",{attrs:{prop:"qq"}},[r("el-input",{attrs:{placeholder:"请输入QQ",autocomplete:"off"},model:{value:e.registerPhoneForm.qq,callback:function(t){e.$set(e.registerPhoneForm,"qq",t)},expression:"registerPhoneForm.qq"}})],1):e._e(),e.clients_profoptional.includes("companyname")?r("el-form-item",{attrs:{prop:"companyname"}},[r("el-input",{attrs:{placeholder:"请输入公司名",autocomplete:"off"},model:{value:e.registerPhoneForm.companyname,callback:function(t){e.$set(e.registerPhoneForm,"companyname",t)},expression:"registerPhoneForm.companyname"}})],1):e._e(),e.clients_profoptional.includes("username")?r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入姓名",autocomplete:"off"},model:{value:e.registerPhoneForm.username,callback:function(t){e.$set(e.registerPhoneForm,"username",t)},expression:"registerPhoneForm.username"}})],1):e._e(),e.clients_profoptional.includes("address1")?r("el-form-item",{attrs:{prop:"address1"}},[r("el-input",{attrs:{placeholder:"请输入地址",autocomplete:"off"},model:{value:e.registerPhoneForm.address1,callback:function(t){e.$set(e.registerPhoneForm,"address1",t)},expression:"registerPhoneForm.address1"}})],1):e._e(),r("el-button",{staticClass:"registerBtn",attrs:{type:"primary",loading:e.registerLoading},on:{click:e.registerPhone}},[e._v(" "+e._s(e.$t("login.register")))])],1)],1)]):e._e(),1===e.allow_register_email?r("el-tab-pane",{attrs:{label:e.$t("login.registerEmail"),name:"email"}},[r("div",{staticClass:"register_form"},[r("el-form",{ref:"registerEmailFormRef",attrs:{model:e.registerEmailForm,rules:e.registerEmailFormRules}},[r("el-form-item",{attrs:{prop:"email",error:e.emailErrorMsg}},[r("el-input",{attrs:{placeholder:e.$t("login.enterEmail"),clearable:""},model:{value:e.registerEmailForm.email,callback:function(t){e.$set(e.registerEmailForm,"email",t)},expression:"registerEmailForm.email"}})],1),e.allow_email_register_code?r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.registerEmailForm.code,callback:function(t){e.$set(e.registerEmailForm,"code",t)},expression:"registerEmailForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled2?"info":"primary",disabled:e.codeBtnDisabled2},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue2))])],1):e._e(),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":""},model:{value:e.registerEmailForm.password,callback:function(t){e.$set(e.registerEmailForm,"password",t)},expression:"registerEmailForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":""},model:{value:e.registerEmailForm.checkPassword,callback:function(t){e.$set(e.registerEmailForm,"checkPassword",t)},expression:"registerEmailForm.checkPassword"}})],1),e.setSaler?r("el-form-item",[r("div",{staticClass:"salelimit"},[r("div",{staticClass:"salelimit_title"},[e._v("销售代表")]),r("div",{staticClass:"salelimit_select"},[r("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择销售",clearable:""},model:{value:e.registerEmailForm.sale_id,callback:function(t){e.$set(e.registerEmailForm,"sale_id",t)},expression:"registerEmailForm.sale_id"}},e._l(e.sale_idOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.user_nickname,value:e.id}})})),1)],1)])]):e._e(),e.clients_profoptional.includes("qq")?r("el-form-item",{attrs:{prop:"qq"}},[r("el-input",{attrs:{placeholder:"请输入QQ",autocomplete:"off"},model:{value:e.registerEmailForm.qq,callback:function(t){e.$set(e.registerEmailForm,"qq",t)},expression:"registerEmailForm.qq"}})],1):e._e(),e.clients_profoptional.includes("companyname")?r("el-form-item",{attrs:{prop:"companyname"}},[r("el-input",{attrs:{placeholder:"请输入公司名",autocomplete:"off"},model:{value:e.registerEmailForm.companyname,callback:function(t){e.$set(e.registerEmailForm,"companyname",t)},expression:"registerEmailForm.companyname"}})],1):e._e(),e.clients_profoptional.includes("username")?r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入姓名",autocomplete:"off"},model:{value:e.registerEmailForm.username,callback:function(t){e.$set(e.registerEmailForm,"username",t)},expression:"registerEmailForm.username"}})],1):e._e(),e.clients_profoptional.includes("address1")?r("el-form-item",{attrs:{prop:"address1"}},[r("el-input",{attrs:{placeholder:"请输入地址",autocomplete:"off"},model:{value:e.registerEmailForm.address1,callback:function(t){e.$set(e.registerEmailForm,"address1",t)},expression:"registerEmailForm.address1"}})],1):e._e(),r("el-button",{staticClass:"registerBtn",attrs:{type:"primary",loading:e.registerLoading},on:{click:e.registerEmail}},[e._v(" "+e._s(e.$t("login.register")))])],1)],1)]):e._e()],1),1===e.allow_register_phone||1===e.allow_register_email?r("div",[r("div",{staticClass:"register_terms"},[r("el-checkbox",{model:{value:e.checkedTerms,callback:function(t){e.checkedTerms=t},expression:"checkedTerms"}}),e._v(e._s(e.$t("login.termsMsg"))+" "),r("el-link",{staticStyle:{"font-size":"12px",margin:"0 4px","text-decoration":"underline"},attrs:{href:e.server_clause_url,target:"blank"}},[e._v(e._s(e.$t("login.terms")))]),e._v(" "+e._s(e.$t("login.and"))+" "),r("el-link",{staticStyle:{"font-size":"12px","margin-left":"4px","text-decoration":"underline"},attrs:{href:e.privacy_clause_url,target:"blank"}},[e._v(e._s(e.$t("login.privacyPolicy"))+" ")])],1),r("div",{staticClass:"register_login"},[e._v(" "+e._s(e.$t("login.hasAccount"))+" "),r("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.$t("login.login")))])],1)]):0===e.allow_register_phone&&0===e.allow_register_email?r("div",{staticClass:"tac"},[e._v(e._s(e.$t("login.nothing"))+" ")]):e._e()],1)])])},o=[],a=(r("b0c0"),r("a9e3"),r("96cf"),r("1da1")),i=r("c7a1"),s=r("7555"),l=r("2ef0"),c={metaInfo:function(){return{title:this.$t("login.register"),titleTemplate:"%s - "+this.companyTitle,htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){var e=this,t=function(t,r,n){""===r?n(new Error(e.$t("login.enterPhone"))):e.checkPhone(r)?n():n(new Error(e.$t("login.validatePhone")))},r=function(t,r,n){""===r?n(new Error(e.$t("login.enterEmail"))):e.checkEmail(r)?n():n(new Error(e.$t("login.validateEmail")))},n=function(t,r,n){""===r?n(new Error(e.$t("login.enterCode"))):n()},o=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwd"))):(""!==e.registerPhoneForm.checkPassword&&e.$refs.registerPhoneFormRef.validateField("checkPassword"),n())},a=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwdAgain"))):r!==e.registerPhoneForm.password?n(new Error(e.$t("login.validatePwd"))):n()},i=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwd"))):(""!==e.registerEmailForm.checkPassword&&e.$refs.registerEmailFormRef.validateField("checkPassword"),n())},s=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwdAgain"))):r!==e.registerEmailForm.password?n(new Error(e.$t("login.validatePwd"))):n()};return{companyTitle:"",logoSrc:"",allow_register_email:void 0,setSaler:void 0,allow_register_phone:void 0,allow_wechat:void 0,allow_email_register_code:void 0,registerLoading:!1,activeName:"phone",phoneCodeOptions:[],registerPhoneForm:{phone_code:"+86",sale_id:Number(this.$route.query.saler)||0,phone:"",code:"",password:"",checkPassword:"",qq:"",companyname:"",username:"",address1:""},registerPhoneFormRules:{phone:[{validator:t,trigger:"blur"}],code:[{validator:n,trigger:"blur"}],password:[{validator:o,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:a,trigger:"blur"}],qq:[{required:!1,pattern:/^\d{1,}$/,message:"请输入正确的QQ",trigger:"blur"}]},phoneErrorMsg:"",registerEmailForm:{email:"",sale_id:Number(this.$route.query.saler)||0,code:"",password:"",checkPassword:"",qq:"",companyname:"",username:"",address1:""},registerEmailFormRules:{email:[{validator:r,trigger:"blur"}],code:[{validator:n,trigger:"blur"}],password:[{validator:i,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:s,trigger:"blur"}],qq:[{required:!1,pattern:/^\d{1,}$/,message:"请输入正确的QQ",trigger:"blur"}]},emailErrorMsg:"",changeBtnValue1:this.$t("login.getCode"),codeBtnDisabled1:!1,timer1:null,changeBtnValue2:this.$t("login.getCode"),codeBtnDisabled2:!1,timer2:null,checkedTerms:!1,prePath:sessionStorage.getItem("prePath")||void 0,clients_profoptional:[],server_clause_url:"",privacy_clause_url:"",sale_idOptions:[]}},methods:{getConfig:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])();case 2:r=t.sent,n=r.data,200!==n.status?e.$message.error(n.msg):(e.companyTitle=n.data.company_name,e.logoSrc=n.data.logo_url,localStorage.setItem("locale",n.data.language),sessionStorage.setItem("changeLang",n.data.allow_user_language),sessionStorage.setItem("certifi_open",n.data.certifi_open),e.$store.dispatch("addCertifiOpen",n.data.certifi_open));case 5:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.activeName=e.name,"phone"===e.name?this.$refs.registerEmailFormRef.resetFields():"email"===e.name&&this.$refs.registerPhoneFormRef.resetFields()},checkPhone:function(e){var t=/^\d{5,13}$/;return!!t.test(e)},checkEmail:function(e){var t=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;return!!t.test(e)},getCheckedCode:l.throttle((function(){var e=this;"phone"===this.activeName?this.$refs.registerPhoneFormRef.validateField("phone",(function(t){if(t)return!1;e.codeByPhone(e.registerPhoneForm.phone_code,e.registerPhoneForm.phone)})):this.$refs.registerEmailFormRef.validateField("email",(function(t){if(t)return!1;e.codeByEmail(e.registerEmailForm.email)}))}),3e3),getSomeMsg:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.setSaler=n.data.setsaler,n.data.saler?n.data.saler.unshift({id:0,user_email:"",user_nickname:"无"},{id:-1,user_email:"",user_nickname:"自动分配"}):n.data.saler=[{id:0,user_email:"",user_nickname:"无"},{id:-1,user_email:"",user_nickname:"自动分配"}],e.sale_idOptions=n.data.saler,e.allow_register_email=n.data.allow_register_email,e.allow_register_phone=n.data.allow_register_phone,e.allow_wechat=n.data.allow_wechat,e.allow_email_register_code=n.data.allow_email_register_code,e.clients_profoptional=n.data.clients_profoptional||[],1===e.allow_register_phone&&(e.activeName="phone"),1===e.allow_register_email&&(e.activeName="email"),1===e.allow_wechat&&(e.activeName="weChat"),e.server_clause_url=n.data.server_clause_url,e.privacy_clause_url=n.data.privacy_clause_url;case 19:case"end":return t.stop()}}),t)})))()},getLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.phoneCodeOptions=n.data;case 7:case"end":return t.stop()}}),t)})))()},codeByPhone:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.phoneErrorMsg="",r.countDownPhone(),n.next=4,Object(s["b"])(e,t);case 4:if(o=n.sent,a=o.data,200===a.status){n.next=14;break}return r.phoneErrorMsg=a.msg,clearInterval(r.timer1),r.codeBtnDisabled1=!1,r.changeBtnValue1=r.$t("login.getCode"),n.abrupt("return",!1);case 14:r.$message.success(a.msg);case 15:case"end":return n.stop()}}),n)})))()},registerPhone:l.throttle((function(){var e=this;if(!this.checkedTerms)return this.$message({message:this.$t("login.agree"),type:"warning",duration:1e3,center:!0}),!1;this.$refs.registerPhoneFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}return e.registerLoading=!0,t.next=4,Object(s["m"])(e.registerPhoneForm);case 4:if(n=t.sent,o=n.data,200===o.status){t.next=10;break}return e.$message({message:o.msg,type:"error",center:!0}),e.registerLoading=!1,t.abrupt("return",!1);case 10:e.$message({message:o.msg,type:"success",center:!0}),clearInterval(e.timer1),e.registerLoading=!1,e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode"),window.localStorage.setItem("OrfLcI2IqQItv0vS",o.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),codeByEmail:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.emailErrorMsg="",t.countDownEmail(),r.next=4,Object(s["a"])(e);case 4:if(n=r.sent,o=n.data,200===o.status){r.next=12;break}return t.emailErrorMsg=o.msg,clearInterval(t.timer2),t.codeBtnDisabled2=!1,t.changeBtnValue2=t.$t("login.getCode"),r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r)})))()},registerEmail:l.throttle((function(){var e=this;if(!this.checkedTerms)return this.$message({message:this.$t("login.agree"),type:"warning",duration:1e3,center:!0}),!1;this.$refs.registerEmailFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}return e.registerLoading=!0,t.next=4,Object(s["l"])(e.registerEmailForm);case 4:if(n=t.sent,o=n.data,200===o.status){t.next=10;break}return e.$message({message:o.msg,type:"error",center:!0}),e.registerLoading=!1,t.abrupt("return",!1);case 10:e.$message({message:o.msg,type:"success",center:!0}),clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.registerLoading=!1,e.changeBtnValue2=e.$t("login.getCode"),window.localStorage.setItem("OrfLcI2IqQItv0vS",o.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),countDownPhone:function(){var e=this,t=60;this.changeBtnValue1=t+this.$t("login.timeCount"),this.timer1=setInterval((function(){0===t?(clearInterval(e.timer1),e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode")):(e.codeBtnDisabled1=!0,e.changeBtnValue1=t+e.$t("login.timeCount"),t--)}),1e3)},countDownEmail:function(){var e=this,t=60;this.changeBtnValue2=t+this.$t("login.timeCount"),this.timer2=setInterval((function(){0===t?(clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.changeBtnValue2=e.$t("login.getCode")):(e.codeBtnDisabled2=!0,e.changeBtnValue2=t+e.$t("login.timeCount"),t--)}),1e3)}},created:function(){this.getSomeMsg(),this.getLogin(),this.getConfig()}},u=c,m=(r("72d3"),r("2877")),g=Object(m["a"])(u,n,o,!1,null,"96e34d38",null);t["default"]=g.exports},a9e3:function(e,t,r){"use strict";var n=r("83ab"),o=r("da84"),a=r("94ca"),i=r("6eeb"),s=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),m=r("d039"),g=r("7c73"),d=r("241c").f,p=r("06cf").f,h=r("9bf2").f,f=r("58a8").trim,w="Number",_=o[w],v=_.prototype,b=l(g(v))==w,$=function(e){var t,r,n,o,a,i,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=f(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=c.slice(2),i=a.length,s=0;s<i;s++)if(l=a.charCodeAt(s),l<48||l>o)return NaN;return parseInt(a,n)}return+c};if(a(w,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var k,F=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof F&&(b?m((function(){v.valueOf.call(r)})):l(r)!=w)?c(new _($(t)),r,F):$(t)},P=n?d(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;P.length>E;E++)s(_,k=P[E])&&!s(F,k)&&h(F,k,p(_,k));F.prototype=v,v.constructor=F,i(o,w,F)}},acf9:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reset"},[r("div",{staticClass:"reset_box"},[r("div",{staticClass:"limit"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.logoSrc,alt:""}})]),r("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1===e.allow_login_phone?r("el-tab-pane",{attrs:{label:e.$t("login.resetPhone"),name:"phone"}},[r("div",{staticClass:"reset_form"},[r("el-form",{ref:"resetPhoneFormRef",attrs:{model:e.resetPhoneForm,rules:e.resetPhoneFormRules}},[r("el-form-item",{attrs:{prop:"phone",error:e.phoneErrorMsg}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("login.enterPhone"),clearable:""},model:{value:e.resetPhoneForm.phone,callback:function(t){e.$set(e.resetPhoneForm,"phone",t)},expression:"resetPhoneForm.phone"}},[r("el-select",{attrs:{slot:"prepend",filterable:""},slot:"prepend",model:{value:e.resetPhoneForm.phone_code,callback:function(t){e.$set(e.resetPhoneForm,"phone_code",t)},expression:"resetPhoneForm.phone_code"}},e._l(e.phoneCodeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.phone_code,value:e.phone_code}})})),1)],1)],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.resetPhoneForm.code,callback:function(t){e.$set(e.resetPhoneForm,"code",t)},expression:"resetPhoneForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled1?"info":"primary",disabled:e.codeBtnDisabled1},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue1))])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterNewPwd"),"show-password":"",autocomplete:"off"},model:{value:e.resetPhoneForm.password,callback:function(t){e.$set(e.resetPhoneForm,"password",t)},expression:"resetPhoneForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":"",autocomplete:"off"},model:{value:e.resetPhoneForm.checkPassword,callback:function(t){e.$set(e.resetPhoneForm,"checkPassword",t)},expression:"resetPhoneForm.checkPassword"}})],1),r("el-button",{staticClass:"resetBtn",attrs:{type:"primary",loading:e.resetLoading},on:{click:e.resetPhone}},[e._v(" "+e._s(e.$t("login.reset")))])],1)],1)]):e._e(),1===e.allow_login_email?r("el-tab-pane",{attrs:{label:e.$t("login.resetEmail"),name:"email"}},[r("div",{staticClass:"reset_form"},[r("el-form",{ref:"resetEmailFormRef",attrs:{model:e.resetEmailForm,rules:e.resetEmailFormRules}},[r("el-form-item",{attrs:{prop:"email",error:e.emailErrorMsg}},[r("el-input",{attrs:{placeholder:e.$t("login.enterEmail"),clearable:""},model:{value:e.resetEmailForm.email,callback:function(t){e.$set(e.resetEmailForm,"email",t)},expression:"resetEmailForm.email"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.resetEmailForm.code,callback:function(t){e.$set(e.resetEmailForm,"code",t)},expression:"resetEmailForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled2?"info":"primary",disabled:e.codeBtnDisabled2},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue2))])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterNewPwd"),"show-password":""},model:{value:e.resetEmailForm.password,callback:function(t){e.$set(e.resetEmailForm,"password",t)},expression:"resetEmailForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":""},model:{value:e.resetEmailForm.checkPassword,callback:function(t){e.$set(e.resetEmailForm,"checkPassword",t)},expression:"resetEmailForm.checkPassword"}})],1),r("el-button",{staticClass:"resetBtn",attrs:{type:"primary",loading:e.resetLoading},on:{click:e.resetEmail}},[e._v(" "+e._s(e.$t("login.reset")))])],1)],1)]):e._e()],1),1===e.allow_login_phone||1===e.allow_login_email?r("div",{staticClass:"reset_login"},[e._v(" "+e._s(e.$t("login.hasAccount"))+" "),r("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.$t("login.login")))])],1):0===e.allow_login_phone&&0===e.allow_login_email?r("div",{staticClass:"tac"},[e._v(e._s(e.$t("login.nothing")))]):e._e()],1)])])},o=[],a=(r("b0c0"),r("96cf"),r("1da1")),i=r("c7a1"),s=r("7555"),l=r("2ef0"),c={metaInfo:function(){return{title:this.$t("login.reset"),titleTemplate:"%s - "+this.companyTitle,htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){var e=this,t=function(t,r,n){""===r?n(new Error(e.$t("login.enterPhone"))):e.checkPhone(r)?n():n(new Error(e.$t("login.validatePhone")))},r=function(t,r,n){""===r?n(new Error(e.$t("login.enterEmail"))):e.checkEmail(r)?n():n(new Error(e.$t("login.validateEmail")))},n=function(t,r,n){""===r?n(new Error(e.$t("login.enterCode"))):n()},o=function(t,r,n){""===r?n(new Error(e.$t("login.enterNewPwd"))):(""!==e.resetPhoneForm.checkPassword&&e.$refs.resetPhoneFormRef.validateField("checkPassword"),n())},a=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwdAgain"))):r!==e.resetPhoneForm.password?n(new Error(e.$t("login.validatePwd"))):n()},i=function(t,r,n){""===r?n(new Error(e.$t("login.enterNewPwd"))):(""!==e.resetEmailForm.checkPassword&&e.$refs.resetEmailFormRef.validateField("checkPassword"),n())},s=function(t,r,n){""===r?n(new Error(e.$t("login.enterPwdAgain"))):r!==e.resetEmailForm.password?n(new Error(e.$t("login.validatePwd"))):n()};return{companyTitle:"",logoSrc:"",allow_login_email:void 0,allow_login_phone:void 0,allow_wechat:void 0,activeName:"phone",resetLoading:!1,resetPhoneForm:{phone:"",phone_code:"+86",code:"",password:"",checkPassword:""},resetPhoneFormRules:{phone:[{validator:t,trigger:"blur"}],code:[{validator:n,trigger:"blur"}],password:[{validator:o,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:a,trigger:"blur"}]},phoneCodeOptions:[],phoneErrorMsg:"",resetEmailForm:{email:"",code:"",password:"",checkPassword:""},resetEmailFormRules:{email:[{validator:r,trigger:"blur"}],code:[{validator:n,trigger:"blur"}],password:[{validator:i,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:s,trigger:"blur"}]},emailErrorMsg:"",changeBtnValue1:this.$t("login.getCode"),codeBtnDisabled1:!1,timer1:null,changeBtnValue2:this.$t("login.getCode"),codeBtnDisabled2:!1,timer2:null}},methods:{getConfig:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])();case 2:r=t.sent,n=r.data,200!==n.status?e.$message.error(n.msg):(e.companyTitle=n.data.company_name,e.logoSrc=n.data.logo_url,localStorage.setItem("locale",n.data.language),sessionStorage.setItem("changeLang",n.data.allow_user_language),sessionStorage.setItem("logoSrc",n.data.logo_url_home),sessionStorage.setItem("certifi_open",n.data.certifi_open),e.$store.dispatch("addCertifiOpen",n.data.certifi_open));case 5:case"end":return t.stop()}}),t)})))()},getSomeMsg:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:if(e.allow_login_email=n.data.allow_login_email,e.allow_login_phone=n.data.allow_login_phone,e.allow_wechat=n.data.allow_wechat,1!==e.allow_login_phone){t.next=12;break}return e.activeName="phone",t.abrupt("return",!1);case 12:if(1!==e.allow_login_email){t.next=15;break}return e.activeName="email",t.abrupt("return",!1);case 15:if(1!==e.allow_wechat){t.next=18;break}return e.activeName="weChat",t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.activeName=e.name,"phone"===e.name?this.$refs.resetEmailFormRef.resetFields():"email"===e.name&&this.$refs.resetPhoneFormRef.resetFields()},checkPhone:function(e){var t=/^\d{5,13}$/;return!!t.test(e)},checkEmail:function(e){var t=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;return!!t.test(e)},getLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.phoneCodeOptions=n.data;case 7:case"end":return t.stop()}}),t)})))()},getCheckedCode:l.throttle((function(){var e=this;"phone"===this.activeName?this.$refs.resetPhoneFormRef.validateField("phone",(function(t){if(t)return!1;e.codeByPhone(e.resetPhoneForm.phone_code,e.resetPhoneForm.phone)})):this.$refs.resetEmailFormRef.validateField("email",(function(t){if(t)return!1;e.codeByEmail(e.resetEmailForm.email)}))}),3e3),codeByPhone:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.phoneErrorMsg="",r.countDownPhone(),n.next=4,Object(s["g"])(e,t);case 4:o=n.sent,a=o.data,200!==a.status?(r.phoneErrorMsg=a.msg,clearInterval(r.timer1),r.codeBtnDisabled1=!1,r.changeBtnValue1=r.$t("login.getCode"),r.$message.error(a.msg)):r.$message.success(a.msg);case 7:case"end":return n.stop()}}),n)})))()},resetPhone:l.throttle((function(){var e=this;this.$refs.resetPhoneFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=19;break}return e.resetLoading=!0,n={phone_code:e.resetPhoneForm.phone_code,phone:e.resetPhoneForm.phone,code:e.resetPhoneForm.code,password:e.resetPhoneForm.password},t.next=5,Object(s["o"])(n);case 5:if(o=t.sent,a=o.data,200===a.status){t.next=11;break}return e.$message({message:a.msg,type:"error",center:!0}),e.resetLoading=!1,t.abrupt("return",!1);case 11:e.$message({message:a.msg,type:"success",center:!0}),e.resetLoading=!1,clearInterval(e.timer1),e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode"),e.$router.push("/login"),t.next=20;break;case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),codeByEmail:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.emailErrorMsg="",t.countDownEmail(),r.next=4,Object(s["f"])(e);case 4:n=r.sent,o=n.data,200!==o.status?(t.emailErrorMsg=o.msg,clearInterval(t.timer2),t.codeBtnDisabled2=!1,t.changeBtnValue2=t.$t("login.getCode"),t.$message.error(o.msg)):t.$message.success(o.msg);case 7:case"end":return r.stop()}}),r)})))()},resetEmail:l.throttle((function(){var e=this;this.$refs.resetEmailFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=19;break}return n={email:e.resetEmailForm.email,code:e.resetEmailForm.code,password:e.resetEmailForm.password},e.resetLoading=!0,t.next=5,Object(s["n"])(n);case 5:if(o=t.sent,a=o.data,200===a.status){t.next=11;break}return e.$message.error(a.msg),e.resetLoading=!1,t.abrupt("return",!1);case 11:e.$message({message:a.msg,type:"success",center:!0}),e.resetLoading=!1,clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.changeBtnValue2=e.$t("login.getCode"),e.$router.push("/login"),t.next=20;break;case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),countDownPhone:function(){var e=this,t=60;this.changeBtnValue1=t+this.$t("login.timeCount"),this.timer1=setInterval((function(){0===t?(clearInterval(e.timer1),e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode")):(e.codeBtnDisabled1=!0,e.changeBtnValue1=t+e.$t("login.timeCount"),t--)}),1e3)},countDownEmail:function(){var e=this,t=60;this.changeBtnValue2=t+this.$t("login.timeCount"),this.timer2=setInterval((function(){0===t?(clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.changeBtnValue2=e.$t("login.getCode")):(e.codeBtnDisabled2=!0,e.changeBtnValue2=t+e.$t("login.timeCount"),t--)}),1e3)}},created:function(){this.getSomeMsg(),this.getLogin(),this.getConfig()}},u=c,m=(r("1d21"),r("2877")),g=Object(m["a"])(u,n,o,!1,null,"37a31676",null);t["default"]=g.exports},c8d2:function(e,t,r){var n=r("d039"),o=r("5899"),a="​᠎";e.exports=function(e){return n((function(){return!!o[e]()||a[e]()!=a||o[e].name!==e}))}}}]);